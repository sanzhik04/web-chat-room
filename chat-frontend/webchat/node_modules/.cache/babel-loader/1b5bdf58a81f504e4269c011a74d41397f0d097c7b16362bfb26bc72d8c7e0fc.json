{"ast":null,"code":"var _jsxFileName = \"/Users/sanzhar/go/src/web-chat-room/chat-frontend/webchat/src/application/pages/index.js\";\nimport React from 'react';\nimport './styles.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst baseURL = 'ws://localhost:8080/chat';\nexport class Chat extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      ws: undefined,\n      username: '',\n      message: '',\n      messages: []\n    };\n  }\n  render() {\n    const {\n      ws,\n      messages\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"WebChat\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Status, {\n        status: ws ? 'connected' : 'disconnected'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 17\n      }, this), ws && /*#__PURE__*/_jsxDEV(Messages, {\n        messages: messages\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-inputs\",\n        children: [/*#__PURE__*/_jsxDEV(InputText, {\n          placeholder: ws ? 'Write message' : 'Enter with your username',\n          onChange: value => ws ? this.setMessage(value) : this.setUsername(value),\n          defaultValue: ws ? this.state.message : this.state.username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => ws ? this.sendMessage() : this.enterChat(),\n          children: ws ? 'Send' : 'Enter'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 13\n    }, this);\n  }\n  enterChat() {\n    const {\n      username\n    } = this.state;\n    let ws = new WebSocket(baseURL + `?username=${username}`);\n    ws.onopen = evt => {\n      console.log('Websocket opened!', {\n        evt\n      });\n    };\n    ws.onclose = evt => {\n      console.log('Websocket closed!', {\n        evt\n      });\n      this.setState({\n        ws: undefined\n      });\n    };\n    ws.onmessage = msg => {\n      console.log('Websocket message:', {\n        msg\n      });\n      this.setMessages(msg.data);\n    };\n    ws.onerror = error => {\n      console.log('Websocket error:', {\n        error\n      });\n    };\n    this.setState({\n      ws,\n      username: ''\n    });\n  }\n  sendMessage() {\n    const {\n      ws,\n      message\n    } = this.state;\n    ws.send(message);\n    this.setMessage('');\n  }\n  setUsername(value) {\n    this.setState({\n      username: value\n    });\n  }\n  setMessage(value) {\n    this.setState({\n      message: value\n    });\n  }\n  setMessages(value) {\n    let messages = this.state.messages.concat([JSON.parse(value)]);\n    this.setState({\n      messages\n    });\n  }\n}","map":{"version":3,"names":["React","baseURL","Chat","Component","constructor","props","state","ws","undefined","username","message","messages","render","value","setMessage","setUsername","sendMessage","enterChat","WebSocket","onopen","evt","console","log","onclose","setState","onmessage","msg","setMessages","data","onerror","error","send","concat","JSON","parse"],"sources":["/Users/sanzhar/go/src/web-chat-room/chat-frontend/webchat/src/application/pages/index.js"],"sourcesContent":["import React from 'react';\n\nimport './styles.css';\n\nconst baseURL = 'ws://localhost:8080/chat';\n\nexport class Chat extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            ws: undefined,\n            username: '',\n            message: '',\n            messages: [],\n        }\n    }\n\n    render() {\n        const { ws, messages } = this.state;\n\n        return (\n            <div className=\"chat\">\n                <h1>WebChat</h1>\n                <Status status={ws ? 'connected' : 'disconnected'} />\n                {\n                    ws && <Messages messages={messages} />\n                }\n                <div className=\"chat-inputs\">\n                    <InputText \n                        placeholder={ws ? 'Write message' : 'Enter with your username'}\n                        onChange={value => ws ? this.setMessage(value) : this.setUsername(value)}\n                        defaultValue={ws ? this.state.message : this.state.username}\n                    />\n                    <button type=\"button\" onClick={() => ws ? this.sendMessage() : this.enterChat()}>\n                        {ws ? 'Send' : 'Enter'}\n                    </button>    \n                </div>\n            </div>\n        )\n    }\n\n    enterChat() {\n        const { username } = this.state;\n\n        let ws = new WebSocket(baseURL + `?username=${username}`);\n\n        ws.onopen = (evt) => {\n            console.log('Websocket opened!', {evt});\n        }\n\n        ws.onclose = (evt) => {\n            console.log('Websocket closed!', {evt});\n            this.setState({ws: undefined});\n        }\n\n        ws.onmessage = (msg) => {\n            console.log('Websocket message:', {msg});\n            this.setMessages(msg.data);\n        }\n\n        ws.onerror = (error) => {\n            console.log('Websocket error:', {error});\n        }\n\n        this.setState({ws, username: ''});\n    }\n\n    sendMessage() {\n        const { ws, message } = this.state;\n\n        ws.send(message);\n        this.setMessage('');\n    }\n\n    setUsername(value) {\n        this.setState({username: value});\n    }\n\n    setMessage(value) {\n        this.setState({message: value});\n    }\n\n    setMessages(value) {\n        let messages = this.state.messages.concat([JSON.parse(value)]);\n        this.setState({messages});\n    }\n}"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,OAAO,cAAc;AAAC;AAEtB,MAAMC,OAAO,GAAG,0BAA0B;AAE1C,OAAO,MAAMC,IAAI,SAASF,KAAK,CAACG,SAAS,CAAC;EACtCC,WAAW,CAACC,KAAK,EAAE;IACf,KAAK,CAACA,KAAK,CAAC;IAEZ,IAAI,CAACC,KAAK,GAAG;MACTC,EAAE,EAAEC,SAAS;MACbC,QAAQ,EAAE,EAAE;MACZC,OAAO,EAAE,EAAE;MACXC,QAAQ,EAAE;IACd,CAAC;EACL;EAEAC,MAAM,GAAG;IACL,MAAM;MAAEL,EAAE;MAAEI;IAAS,CAAC,GAAG,IAAI,CAACL,KAAK;IAEnC,oBACI;MAAK,SAAS,EAAC,MAAM;MAAA,wBACjB;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAAgB,eAChB,QAAC,MAAM;QAAC,MAAM,EAAEC,EAAE,GAAG,WAAW,GAAG;MAAe;QAAA;QAAA;QAAA;MAAA,QAAG,EAEjDA,EAAE,iBAAI,QAAC,QAAQ;QAAC,QAAQ,EAAEI;MAAS;QAAA;QAAA;QAAA;MAAA,QAAG,eAE1C;QAAK,SAAS,EAAC,aAAa;QAAA,wBACxB,QAAC,SAAS;UACN,WAAW,EAAEJ,EAAE,GAAG,eAAe,GAAG,0BAA2B;UAC/D,QAAQ,EAAEM,KAAK,IAAIN,EAAE,GAAG,IAAI,CAACO,UAAU,CAACD,KAAK,CAAC,GAAG,IAAI,CAACE,WAAW,CAACF,KAAK,CAAE;UACzE,YAAY,EAAEN,EAAE,GAAG,IAAI,CAACD,KAAK,CAACI,OAAO,GAAG,IAAI,CAACJ,KAAK,CAACG;QAAS;UAAA;UAAA;UAAA;QAAA,QAC9D,eACF;UAAQ,IAAI,EAAC,QAAQ;UAAC,OAAO,EAAE,MAAMF,EAAE,GAAG,IAAI,CAACS,WAAW,EAAE,GAAG,IAAI,CAACC,SAAS,EAAG;UAAA,UAC3EV,EAAE,GAAG,MAAM,GAAG;QAAO;UAAA;UAAA;UAAA;QAAA,QACjB;MAAA;QAAA;QAAA;QAAA;MAAA,QACP;IAAA;MAAA;MAAA;MAAA;IAAA,QACJ;EAEd;EAEAU,SAAS,GAAG;IACR,MAAM;MAAER;IAAS,CAAC,GAAG,IAAI,CAACH,KAAK;IAE/B,IAAIC,EAAE,GAAG,IAAIW,SAAS,CAACjB,OAAO,GAAI,aAAYQ,QAAS,EAAC,CAAC;IAEzDF,EAAE,CAACY,MAAM,GAAIC,GAAG,IAAK;MACjBC,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAE;QAACF;MAAG,CAAC,CAAC;IAC3C,CAAC;IAEDb,EAAE,CAACgB,OAAO,GAAIH,GAAG,IAAK;MAClBC,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAE;QAACF;MAAG,CAAC,CAAC;MACvC,IAAI,CAACI,QAAQ,CAAC;QAACjB,EAAE,EAAEC;MAAS,CAAC,CAAC;IAClC,CAAC;IAEDD,EAAE,CAACkB,SAAS,GAAIC,GAAG,IAAK;MACpBL,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAE;QAACI;MAAG,CAAC,CAAC;MACxC,IAAI,CAACC,WAAW,CAACD,GAAG,CAACE,IAAI,CAAC;IAC9B,CAAC;IAEDrB,EAAE,CAACsB,OAAO,GAAIC,KAAK,IAAK;MACpBT,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAE;QAACQ;MAAK,CAAC,CAAC;IAC5C,CAAC;IAED,IAAI,CAACN,QAAQ,CAAC;MAACjB,EAAE;MAAEE,QAAQ,EAAE;IAAE,CAAC,CAAC;EACrC;EAEAO,WAAW,GAAG;IACV,MAAM;MAAET,EAAE;MAAEG;IAAQ,CAAC,GAAG,IAAI,CAACJ,KAAK;IAElCC,EAAE,CAACwB,IAAI,CAACrB,OAAO,CAAC;IAChB,IAAI,CAACI,UAAU,CAAC,EAAE,CAAC;EACvB;EAEAC,WAAW,CAACF,KAAK,EAAE;IACf,IAAI,CAACW,QAAQ,CAAC;MAACf,QAAQ,EAAEI;IAAK,CAAC,CAAC;EACpC;EAEAC,UAAU,CAACD,KAAK,EAAE;IACd,IAAI,CAACW,QAAQ,CAAC;MAACd,OAAO,EAAEG;IAAK,CAAC,CAAC;EACnC;EAEAc,WAAW,CAACd,KAAK,EAAE;IACf,IAAIF,QAAQ,GAAG,IAAI,CAACL,KAAK,CAACK,QAAQ,CAACqB,MAAM,CAAC,CAACC,IAAI,CAACC,KAAK,CAACrB,KAAK,CAAC,CAAC,CAAC;IAC9D,IAAI,CAACW,QAAQ,CAAC;MAACb;IAAQ,CAAC,CAAC;EAC7B;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}